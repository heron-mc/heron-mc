<html>
<head>
	<title>GeoExt MapPanel Debug</title>

	<!-- external libs -->
	<link rel="stylesheet" type="text/css" href="http://kademo.nl/lib/ext/3.3.1/resources/css/ext-all.css"/>
	<script type="text/javascript" src="http://extjs.cachefly.net/ext-3.3.1/adapter/ext/ext-base.js"></script>
	<script type="text/javascript" src="http://extjs.cachefly.net/ext-3.3.1/ext-all.js"></script>
	<!--	<script type="text/javascript" src="http://extjs.cachefly.net/ext-3.3.1/adapter/ext/ext-base-debug.js"></script>
		<script type="text/javascript" src="http://kademo.nl/lib/ext/3.3.1/ext-all-debug-w-comments.js"></script>   -->


	<script type="text/javascript" src="http://kademo.nl/lib/openlayers/2.10/lib/OpenLayers.js"></script>
	<script type="text/javascript" src="http://kademo.nl/lib/geoext/1.0/lib/GeoExt.js"></script>
	<link rel="stylesheet" type="text/css" href="../../resources/css/default.css"/>

	<script type="text/javascript">

		var gxMapPanelOptions = {
			id : "gx-map-panel",
			split : false,

			renderTo: "gv-mainpanel",

			map : {
				projection: 'EPSG:28992',
				units: 'm',
				resolutions: [860.160, 430.080, 215.040, 107.520, 53.760, 26.880, 13.440, 6.720, 3.360, 1.680, 0.840, 0.420, 0.210, 0.105, 0.0525],
				maxExtent: '-65200.96,242799.04,375200.96,683200.96',
				center: '155000,463000',
				xy_precision: 3,
				zoom: 2,

				allOverlays: false,
				fractionalZoom : false,


				controls : [
					new OpenLayers.Control.Attribution(),
					new OpenLayers.Control.ZoomBox(),
					new OpenLayers.Control.Navigation()
				]

			},

			items: [
				{
					xtype: "gx_zoomslider",
					vertical: true,
					height: 220,
					x: 10,
					y: 20,
					plugins: new GeoExt.ZoomSliderTip()
				}
			],

			layers :[
				/*
				 * ==================================
				 *            BaseLayers
				 * ==================================
				 */


				/*
				 * Basemap openStreetMap TileCache+Mapnik
				 */
				new OpenLayers.Layer.WMS(
						"OpenStreetMap",
						'http://gis.kademo.nl/cgi-bin/tilecache.cgi?',
				{layers: "osm", format: "image/png", transparent: false},
				{singleTile: false, isBaseLayer: true,  visibility: false,  attribution: "Data CC-By-SA by <a href='http://openstreetmap.org/'>OpenStreetMap</a>"}
						)
			]
		};

		Ext.onReady(function() {


			if (typeof gxMapPanelOptions.map.maxExtent == "string") {
				gxMapPanelOptions.map.maxExtent = OpenLayers.Bounds.fromString(gxMapPanelOptions.map.maxExtent);
				// gxMapPanelOptions.extent = gxMapPanelOptions.map.maxExtent;
			}
			if (typeof gxMapPanelOptions.map.extent == "string") {
				gxMapPanelOptions.map.extent = OpenLayers.Bounds.fromString(gxMapPanelOptions.map.extent);
				gxMapPanelOptions.extent = gxMapPanelOptions.map.extent;
			}
			if (typeof gxMapPanelOptions.map.center == "string") {
				gxMapPanelOptions.map.center = OpenLayers.LonLat.fromString(gxMapPanelOptions.map.center);
				gxMapPanelOptions.center = gxMapPanelOptions.map.center;
			}
			if (gxMapPanelOptions.map.zoom) {
				gxMapPanelOptions.zoom = gxMapPanelOptions.map.zoom;
			}


			// WHY needed ??
			gxMapPanelOptions.map.layers = gxMapPanelOptions.layers;
			// gxMapPanelOptions.layers = this.hropts.layers;

			var gxMapPanel = new GeoExt.MapPanel(gxMapPanelOptions);
		});
	</script>

</head>
<body>
<h1>GeoExt.MapPanel with an Existing OpenLayers.Map</h1>

<p>This example is taken from GeoExt examples and modified to debug issue 39.

<p>See <a href="http://code.google.com/p/geoext-viewer/issues/detail?id=39">issue 39</a>.</p>

<div id="gv-mainpanel"></div>
</body>
</html>
